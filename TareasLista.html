<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/TareasList.css">
    <title>Document</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body>
  <div class="over" id="over">
    <div class="sidebar" id="sidebar">
      <div class="espacioArriba-side"></div>
      <div class="navbar-side">
        <button class="nav-left" onclick="toggleSidebar()"><i class="bi bi-list"></i></button>
        <div class="imgnavside">
          <img src="img/escudosgo.png" class="footimg" alt="Santiago del Estero">
        </div>
      </div>
      <ul>
        <li><a href="ProyectosLista.html">Proyectos</a></li>
        <li><a href="TareasLista.html">Tareas</a></li>
        <hr>
      </ul>

    </div>
  </div> 

  <div class="espacioArriba"></div>

  <div class="navbar">
    <button class="nav-left" onclick="toggleSidebar()"><i class="bi bi-list"></i></button>
    <div class="nav-center">
      <h1>Tareas</h1>
    </div>
    <button class="nav-right" id="nav-right" onclick="toggleMenuuser()"><i class="bi bi-person-fill"></i></button>
  </div>
  <div class="menuuser" id="menuuser">
    <div>
      <i class="bi bi-gear"></i><a href="#">Configuración</a>
    </div>
    <hr>
    <div>
      <i class="bi bi-door-closed"></i><a href="#">Salir</a>
    </div>
  </div>
  
    <div class="contenedor">
        <div class="input-container menu d-flex">
            <div class='menu1'>
                <i class="bi bi-sort-alpha-down icon"></i>
                <i class="bi bi-sort-numeric-down icon"></i>
            </div>
            <div class='menu3'>
              <div class="buscar">
                  <i class="bi bi-search"></i>
                  <input type="search" placeholder="buscar">
              </div>
          </div>
            <div class='menu2'>
                <div class="buscar">
                    <select name="" id="">
                      <option value="Todas">Todas</option>
                      <option value=""><i class="bi bi-record-fill" style="color: #ED0000;"></i> Pendientes</option>
                      <option value=""><i class="bi bi-record-fill" style="color: #FFC700;"></i> En Curso</option>
                      <option value=""><i class="bi bi-record-fill" style="color: #3BC160;"></i> Finalizadas</option>
                    </select>
                </div>
            </div>
        </div>
        <table class="table">
            <thead>
              <tr>
                <th scope="col">Tareas</th>
                <th scope="col">Descripción</th>
                <th scope="col">Proyecto</th>
                <th scope="col">Inicio</th>
                <th scope="col">Estado</th>
                <th scope="col" class="fan"></th>
                <th scope="col">Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Proyecto A</td>
                <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
                <td>Alto</td>
                <td>John Doe</td>
                <td><i class="bi bi-record-fill" style="color: #3BC160;"></i></td>
                <td class="fan"></td>
                <td>
                  <i class="bi bi-three-dots" onclick="toggleMenuOpcion()"></i>
                  <div class="menuopcion" id="menuopcion">
                  </div>
                </td>
                <script>
                  document.addEventListener('click', function(event) {
                    var menu = document.getElementById('menuopcion');
                    var targetElement = event.target; 
                    // cierra el menu de usuario si aprieta fuera 
                    if (menu.offsetHeight > 2) {
                      if (!menu.contains(targetElement)) {
                        menu.style.height = '0px'; // Cambia el ancho del div a 0px
                      } 
                    }

                  });

                  // abre o cierra el menu de usuario al apretar el boton 
                  function toggleMenuOpcion() {
                    var menuuser = document.getElementById('menuopcion');
                    if (menuuser.offsetHeight === 0) {
                        menuuser.style.height = '200px'; // Cambia el ancho del menuuser a 200px
                        menuuser.style.border = '1px solid hsla(0, 0%, 0%, 0.5)';
                    } else {
                        menuuser.style.height = '0px'; // Cambia el ancho del menuuser a 0px
                    }
                  }

                  // Agregar un escuchador para el evento transitionend
                  document.querySelector('.menuopcion').addEventListener('transitionend', function(event) {
                    var menuuser = event.target;
                    if (menuuser.offsetHeight === 2) {
                        menuuser.style.border = 'none'; // Quita el borde
                    } 
                  });

                </script>
              </tr>
              <tr>
                <td>Proyecto B</td>
                <td>Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</td>
                <td>Medio</td>
                <td>Jane Doe</td>
                <td><i class="bi bi-record-fill" style="color: #ED0000;"></i></td>
                <td class="fan"></td>
                <td>
                  <i class="bi bi-three-dots"></i>
                </td>
              </tr>
              <tr>
                <td>Proyecto C</td>
                <td>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</td>
                <td>Bajo</td>
                <td>Max Mustermann</td>
                <td><i class="bi bi-record-fill" style="color: #FFC700;"></i></td>
                <td class="fan"></td>
                <td><i class="bi bi-three-dots"></i></td>
              </tr>
            </tbody>
        </table>
    </div>
  </body>
  <script>
    document.addEventListener('click', function(event) {

      // cierra el sidebar si se preciona fuera 
      var side = document.getElementById('sidebar');
      var menu = document.getElementById('menuuser');
      var targetElement = event.target; 

      if (side.offsetWidth != 0) {
        if (!side.contains(targetElement)) {
            console.log('side')
            toggleSidebar()
        }
      }

      // cierra el menu de usuario si aprieta fuera 
      if (menu.offsetHeight > 2) {
        if (!menu.contains(targetElement)) {
          console.log('hola',menu.offsetHeight)
          menu.style.height = '0px'; // Cambia el ancho del div a 0px
        } 
      }

    });

    // abre o cierra el sidebar al apretar el boton 
    function toggleSidebar() {
        var sidebar = document.getElementById('sidebar');
        var over = document.getElementById('over');
        if (sidebar.offsetWidth === 0) {
            sidebar.style.width = '360px'; // Cambia el ancho del sidebar a 360px
            over.style.width= '100%'
        } else {
            sidebar.style.width = '0px'; // Cambia el ancho del sidebar a 0px
            over.style.width= '0px'
        }
    }

    // abre o cierra el menu de usuario al apretar el boton 
    function toggleMenuuser() {
      var menuuser = document.getElementById('menuuser');
      if (menuuser.offsetHeight === 0) {
          menuuser.style.height = '110px'; // Cambia el ancho del menuuser a 110px
          menuuser.style.border = '1px solid hsla(0, 0%, 0%, 0.5)';
      } else {
          menuuser.style.height = '0px'; // Cambia el ancho del menuuser a 0px
      }
    }

    // Agregar un escuchador para el evento transitionend
    document.querySelector('.menuuser').addEventListener('transitionend', function(event) {
      var menuuser = event.target;
      if (menuuser.offsetHeight === 2) {
          menuuser.style.border = 'none'; // Quita el borde
      } 
    });

    
  </script>
  
  <footer>
    <div>
      <img src="img/escudosgo.png" class="footimg" alt="Santiago del Estero">
    </div>
  </footer>
</html>